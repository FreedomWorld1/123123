<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finanz Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .balance-card {
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .balance-card h2 {
            font-size: 1.5em;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .balance-amount {
            font-size: 3.5em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .transaction-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .form-section h3 {
            color: #495057;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #495057;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ced4da;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #4e54c8;
        }
        
        button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }
        
        .deposit-btn {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }
        
        .withdraw-btn {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #4e54c8;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 1.1em;
        }
        
        .transaction-history {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .transaction-history h3 {
            color: #495057;
            margin-bottom: 20px;
        }
        
        #transactionList {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 5px solid #4e54c8;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .transaction-item.deposit {
            border-left-color: #56ab2f;
        }
        
        .transaction-item.withdraw {
            border-left-color: #ff416c;
        }
        
        .transaction-amount {
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .deposit-amount {
            color: #56ab2f;
        }
        
        .withdraw-amount {
            color: #ff416c;
        }
        
        .transaction-date {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .github-section {
            text-align: center;
            padding: 20px;
            background: #24292e;
            color: white;
            border-radius: 15px;
        }
        
        .github-section a {
            color: #58a6ff;
            text-decoration: none;
            font-weight: 600;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification.success {
            background: #56ab2f;
        }
        
        .notification.error {
            background: #ff416c;
        }
        
        @media (max-width: 768px) {
            .transaction-form {
                grid-template-columns: 1fr;
            }
            
            .balance-amount {
                font-size: 2.5em;
            }
            
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ’° Finanz Dashboard</h1>
            <p>Verwalte deine Einzahlungen und Auszahlungen</p>
        </header>
        
        <div class="balance-card">
            <h2>Dein aktuelles Guthaben</h2>
            <div class="balance-amount" id="balance">0.00 â‚¬</div>
            <p>Letzte Aktualisierung: <span id="lastUpdate">--</span></p>
        </div>
        
        <div class="transaction-form">
            <div class="form-section">
                <h3>ðŸ’° Einzahlung</h3>
                <div class="input-group">
                    <label for="depositAmount">Betrag (â‚¬)</label>
                    <input type="number" id="depositAmount" min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="input-group">
                    <label for="depositDescription">Beschreibung</label>
                    <input type="text" id="depositDescription" placeholder="z.B. Gehalt, Geschenk...">
                </div>
                <button class="deposit-btn" onclick="makeDeposit()">Einzahlen</button>
            </div>
            
            <div class="form-section">
                <h3>ðŸ’¸ Auszahlung</h3>
                <div class="input-group">
                    <label for="withdrawAmount">Betrag (â‚¬)</label>
                    <input type="number" id="withdrawAmount" min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="input-group">
                    <label for="withdrawDescription">Beschreibung</label>
                    <input type="text" id="withdrawDescription" placeholder="z.B. Miete, Einkauf...">
                </div>
                <button class="withdraw-btn" onclick="makeWithdrawal()">Auszahlen</button>
            </div>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">Einzahlungen insgesamt</div>
                <div class="stat-value" id="totalDeposits">0 â‚¬</div>
                <div class="stat-label" id="depositCount">0 Transaktionen</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">Auszahlungen insgesamt</div>
                <div class="stat-value" id="totalWithdrawals">0 â‚¬</div>
                <div class="stat-label" id="withdrawalCount">0 Transaktionen</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">Durchschn. Einzahlung</div>
                <div class="stat-value" id="avgDeposit">0 â‚¬</div>
                <div class="stat-label">pro Transaktion</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">GrÃ¶ÃŸte Einzahlung</div>
                <div class="stat-value" id="maxDeposit">0 â‚¬</div>
                <div class="stat-label">HÃ¶chster Betrag</div>
            </div>
        </div>
        
        <div class="transaction-history">
            <h3>ðŸ“‹ Transaktionsverlauf</h3>
            <div id="transactionList">
                <!-- Transaktionen werden hier angezeigt -->
            </div>
        </div>
        
        <div class="github-section">
            <h3>ðŸ“Š GitHub Integration</h3>
            <p>Statistiken werden lokal gespeichert</p>
            <p>Speichere die Datei in deinem GitHub Repository und pushe die Daten</p>
            <p>ðŸ‘‰ <a href="https://github.com" target="_blank">GitHub Repository erstellen</a></p>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // Daten aus LocalStorage laden oder initialisieren
        let financialData = JSON.parse(localStorage.getItem('financialData')) || {
            balance: 0,
            transactions: [],
            totalDeposits: 0,
            totalWithdrawals: 0,
            depositCount: 0,
            withdrawalCount: 0,
            maxDeposit: 0,
            lastUpdate: null
        };

        // Funktion zum Anzeigen der Daten
        function updateDisplay() {
            // Guthaben anzeigen
            document.getElementById('balance').textContent = 
                financialData.balance.toFixed(2) + ' â‚¬';
            
            // Statistiken anzeigen
            document.getElementById('totalDeposits').textContent = 
                financialData.totalDeposits.toFixed(2) + ' â‚¬';
            document.getElementById('totalWithdrawals').textContent = 
                financialData.totalWithdrawals.toFixed(2) + ' â‚¬';
            document.getElementById('depositCount').textContent = 
                financialData.depositCount + ' Transaktionen';
            document.getElementById('withdrawalCount').textContent = 
                financialData.withdrawalCount + ' Transaktionen';
            
            // Durchschnitt berechnen
            const avgDeposit = financialData.depositCount > 0 
                ? financialData.totalDeposits / financialData.depositCount 
                : 0;
            document.getElementById('avgDeposit').textContent = 
                avgDeposit.toFixed(2) + ' â‚¬';
            
            // GrÃ¶ÃŸte Einzahlung
            document.getElementById('maxDeposit').textContent = 
                financialData.maxDeposit.toFixed(2) + ' â‚¬';
            
            // Letzte Aktualisierung
            if (financialData.lastUpdate) {
                const date = new Date(financialData.lastUpdate);
                document.getElementById('lastUpdate').textContent = 
                    date.toLocaleDateString('de-DE') + ' ' + date.toLocaleTimeString('de-DE');
            }
            
            // Transaktionsliste aktualisieren
            updateTransactionList();
            
            // In LocalStorage speichern
            localStorage.setItem('financialData', JSON.stringify(financialData));
            
            // GitHub stats.json generieren (fÃ¼r GitHub Pages)
            generateGitHubStats();
        }

        // Funktion zum HinzufÃ¼gen einer Transaktion
        function addTransaction(amount, type, description) {
            const transaction = {
                id: Date.now(),
                amount: amount,
                type: type,
                description: description,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            financialData.transactions.unshift(transaction);
            
            if (type === 'deposit') {
                financialData.balance += amount;
                financialData.totalDeposits += amount;
                financialData.depositCount++;
                if (amount > financialData.maxDeposit) {
                    financialData.maxDeposit = amount;
                }
            } else if (type === 'withdraw') {
                if (amount > financialData.balance) {
                    showNotification('Nicht genug Guthaben!', 'error');
                    return false;
                }
                financialData.balance -= amount;
                financialData.totalWithdrawals += amount;
                financialData.withdrawalCount++;
            }
            
            financialData.lastUpdate = new Date().toISOString();
            updateDisplay();
            
            showNotification(
                type === 'deposit' 
                    ? `Erfolgreich ${amount.toFixed(2)} â‚¬ eingezahlt!` 
                    : `Erfolgreich ${amount.toFixed(2)} â‚¬ ausgezahlt!`,
                'success'
            );
            
            return true;
        }

        // Funktion fÃ¼r Einzahlung
        function makeDeposit() {
            const amountInput = document.getElementById('depositAmount');
            const descriptionInput = document.getElementById('depositDescription');
            
            const amount = parseFloat(amountInput.value);
            const description = descriptionInput.value.trim() || 'Einzahlung';
            
            if (!amount || amount <= 0) {
                showNotification('Bitte geben Sie einen gÃ¼ltigen Betrag ein!', 'error');
                return;
            }
            
            addTransaction(amount, 'deposit', description);
            
            // Formular zurÃ¼cksetzen
            amountInput.value = '';
            descriptionInput.value = '';
        }

        // Funktion fÃ¼r Auszahlung
        function makeWithdrawal() {
            const amountInput = document.getElementById('withdrawAmount');
            const descriptionInput = document.getElementById('withdrawDescription');
            
            const amount = parseFloat(amountInput.value);
            const description = descriptionInput.value.trim() || 'Auszahlung';
            
            if (!amount || amount <= 0) {
                showNotification('Bitte geben Sie einen gÃ¼ltigen Betrag ein!', 'error');
                return;
            }
            
            addTransaction(amount, 'withdraw', description);
            
            // Formular zurÃ¼cksetzen
            amountInput.value = '';
            descriptionInput.value = '';
        }

        // Funktion zum Aktualisieren der Transaktionsliste
        function updateTransactionList() {
            const transactionList = document.getElementById('transactionList');
            transactionList.innerHTML = '';
            
            // Neueste 10 Transaktionen anzeigen
            const recentTransactions = financialData.transactions.slice(0, 10);
            
            if (recentTransactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; color: #6c757d;">Noch keine Transaktionen</p>';
                return;
            }
            
            recentTransactions.forEach(transaction => {
                const transactionItem = document.createElement('div');
                transactionItem.className = `transaction-item ${transaction.type}`;
                
                const date = new Date(transaction.date);
                const formattedDate = date.toLocaleDateString('de-DE', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                transactionItem.innerHTML = `
                    <div>
                        <div style="font-weight: 500;">${transaction.description}</div>
                        <div class="transaction-date">${formattedDate}</div>
                    </div>
                    <div class="transaction-amount ${transaction.type}-amount">
                        ${transaction.type === 'deposit' ? '+' : '-'}${transaction.amount.toFixed(2)} â‚¬
                    </div>
                `;
                
                transactionList.appendChild(transactionItem);
            });
        }

        // Funktion zum Anzeigen von Benachrichtigungen
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Funktion zum Exportieren der Daten als JSON (fÃ¼r GitHub)
        function generateGitHubStats() {
            const stats = {
                generated: new Date().toISOString(),
                balance: financialData.balance,
                totalDeposits: financialData.totalDeposits,
                totalWithdrawals: financialData.totalWithdrawals,
                transactionCount: financialData.transactions.length,
                lastTransaction: financialData.transactions[0] || null,
                summary: {
                    averageDeposit: financialData.depositCount > 0 
                        ? financialData.totalDeposits / financialData.depositCount 
                        : 0,
                    averageWithdrawal: financialData.withdrawalCount > 0 
                        ? financialData.totalWithdrawals / financialData.withdrawalCount 
                        : 0,
                    maxDeposit: financialData.maxDeposit
                }
            };
            
            // JSON-Datei erstellen (kann in GitHub Pages gespeichert werden)
            const dataStr = JSON.stringify(stats, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            // FÃ¼r den Export als Datei
            window.financialStats = dataStr;
            
            console.log('GitHub Stats generiert:', stats);
        }

        // Demo-Daten hinzufÃ¼gen, wenn leer
        function initializeDemoData() {
            if (financialData.transactions.length === 0) {
                addTransaction(1000, 'deposit', 'Startguthaben');
                addTransaction(500, 'deposit', 'Gehalt');
                addTransaction(300, 'withdraw', 'Miete');
                addTransaction(150, 'withdraw', 'Einkauf');
                addTransaction(200, 'deposit', 'RÃ¼ckerstattung');
            }
        }

        // App initialisieren
        document.addEventListener('DOMContentLoaded', () => {
            initializeDemoData();
            updateDisplay();
            
            // Enter-Taste fÃ¼r Formulare
            document.getElementById('depositAmount').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') makeDeposit();
            });
            
            document.getElementById('withdrawAmount').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') makeWithdrawal();
            });
            
            // Reset-Button hinzufÃ¼gen (versteckt)
            const resetBtn = document.createElement('button');
            resetBtn.textContent = 'Daten zurÃ¼cksetzen';
            resetBtn.style.cssText = `
                background: #6c757d;
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                border: none;
                cursor: pointer;
                margin-top: 20px;
                font-size: 0.9em;
                opacity: 0.7;
            `;
            resetBtn.onclick = () => {
                if (confirm('Alle Daten zurÃ¼cksetzen? Dies kann nicht rÃ¼ckgÃ¤ngig gemacht werden.')) {
                    localStorage.removeItem('financialData');
                    financialData = {
                        balance: 0,
                        transactions: [],
                        totalDeposits: 0,
                        totalWithdrawals: 0,
                        depositCount: 0,
                        withdrawalCount: 0,
                        maxDeposit: 0,
                        lastUpdate: null
                    };
                    initializeDemoData();
                    updateDisplay();
                }
            };
            
            document.querySelector('.github-section').appendChild(resetBtn);
        });

        // Export-Funktion fÃ¼r Daten
        function exportData() {
            const dataStr = JSON.stringify(financialData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'finanz-daten.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
        
        // Daten kÃ¶nnen mit dieser Funktion importiert werden
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    financialData = importedData;
                    updateDisplay();
                    showNotification('Daten erfolgreich importiert!', 'success');
                } catch (error) {
                    showNotification('Fehler beim Importieren der Daten!', 'error');
                }
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>
